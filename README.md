### [–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–±—ã—Ç–∏–π –£–º–Ω–æ–≥–æ–î–æ–º–∞ ü§ñ](https://haritonasty.github.io/yandex-shri-smarthome/)

–ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞—é –Ω–∞ node 8.11.4

```
npm i
npm run dev
```

### HW-Flux
- –î–ª—è –∑–∞–ø—É—Å–∫–∞  - `npm run dev`

#### –û–ø–∏—Å–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

Flux —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —á–∞—Å—Ç–µ–π:
- Store
- View
- Dispatcher

##### 1. Dispatcher API

–£–º–µ–µ—Ç:
 - —Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–µ–±–µ store - `dispatcher.register(store: IStore)`
 - –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—ä–µ–∫—Ç —Å –¥–µ–π—Å—Ç–≤–∏–µ–º –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º store-–∞–º `Flux.Dispatcher.dispatch(action: IAction)`
 - –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å action-—ã (–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ dispatch)
 
 –≠–∫–∑–µ–º–ø–ª—è—Ä Flux.Dispatcher —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ —Å–æ–∑–¥–∞–Ω Dispatcher-—Å–∏–Ω–≥–ª—Ç–æ–Ω

##### 2. Store API

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ store –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω—ã–π `state: object`
```javascript
const store = new Flux.Store(state: object);
```

–î–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ `view` –Ω–∞ `store` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `subscribe(view: IView)`:
```javascript
store.subscribe(view: IView);
```
–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π-–æ–±—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ action-—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `setResponses(Map<string, CallbackFunction>)`:
```javascript
store.setResponses(new Map().set('INCREASE', () => this.state.count++));
```

–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –≤–∏–¥–µ chaining:
```javascript
store.subscribe(viewNav).setResponses(navCallbacks);
```

–ü–æ–ª—É—á–∏—Ç—å `state` –∏–∑ `store` –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é: 
```javascript
store.getState();
```
##### 3. View API

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π View, –Ω—É–∂–Ω–æ: 
 - –æ—Ç–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ View
 - –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–≤–æ–µ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏ –æ–¥–∏–Ω –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π–∏ –≤—ã–∑–≤–∞—Ç—å —Å –Ω–∏–º–∏ super:
 ```javascript
constructor(node: HTMLElement | null, template: string, actions?: Map<string, CallbackFunction>) {
        super(node, template, actions);
    }
```
 - –ù–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ update(state: IState):
 ```javascript
    update(): this {
        this.node.innerHTML = this.template;
        return this;
    };

```
 - –ï—Å–ª–∏ –≤–∞—à `view` —Å–æ–¥–µ—Ä–∂–∏—Ç `actions`, –≤ update –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ `this.initActions()`
 - –í –¥–∞–Ω–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ action-—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–æ handle-event-–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ —à–∞–±–ª–æ–Ω–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä c –ø–æ–º–æ—â—å—é –∞—Ç—Ä–∏–±—É—Ç–∞ `data-event`:
 ```javascript
 <a class="main-nav__item-link" href="#" data-event="click=changePage">–°–æ–±—ã—Ç–∏—è</a>
```
 
---
### HW-Typescript

- –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ—Ö –î–ó (–≤–µ—Ä—Å—Ç–∫–∞, —Å–µ–Ω—Å–æ—Ä, –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞) - `npm run dev`
- –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é gulp, typescript-–∫–æ–º–ø–∏–ª—è—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é –ø–∞–∫–µ—Ç–∞ `gulp-typescript`
---
- –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ - `npm run start`. 
- –ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `app`.
- –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ `.js` —Å –ø–æ–º–æ—â—å—é `npm run compile`
---
#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 4-–µ—Ö –î–ó

- `1` [–º–∞–∫–µ—Ç](https://shri-msk-2018-reviewer.github.io/shri-18-smarthouse-task-1/)
–ù—É–∂–Ω–æ —Å–≤–µ—Ä—Å—Ç–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–µ–Ω—Ç—ã —Å–æ–±—ã—Ç–∏–π —É–º–Ω–æ–≥–æ –¥–æ–º–∞.
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –ª–µ–Ω—Ç—ã –¥–ª—è —ç–∫—Ä–∞–Ω–∞. 
–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞ –¥—Ä—É–≥–∏—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –í–µ—Ä—Å—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π.

- `2` –û–∂–∏–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Å –ø—ã–ª–µ—Å–æ—Å–æ–º —Å –ø–æ–º–æ—â—å—é pointer events. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å zoom, rotate, move

- `3` –°—Ç—Ä–∞–Ω–∏—Ü–∞-–≤–∫–ª–∞–¥–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —É–º–Ω–æ–≥–æ –¥–æ–º–∞ "–í–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ":
1. –°–µ—Ç–∫–∞ –∏–∑ 4-—ë—Ö –≤–∏–¥–µ–æ-–ø—Ä–µ–≤—å—é. –ö–ª–∏–∫ –ø–æ –ø—Ä–µ–≤—å—é —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –≤–∏–¥–µ–æ –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.
2. –í–∏–¥–µ–æ-–ø–æ—Ç–æ–∫ —Å –∫–∞–º–µ—Ä—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–ª–æ—Ö–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (—Ä–∞–∑–º—ã—Ç—ã–π, –∑–∞—Å–≤–µ—á–µ–Ω–Ω—ã–π –∏–ª–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π) - –Ω–∞ —ç–∫—Ä–∞–Ω—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ –¥–æ–ª–∂–Ω–∞ –µ—Å—Ç—å `–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —è—Ä–∫–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å`.
3. –¢–∞–º –∂–µ - –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∑–≤—É–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ –∏–∑ –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–∞–º–µ—Ä—ã.

- `4` —Å–µ—Ä–≤–µ—Ä –Ω–∞ express –Ω–∞ 8000 –ø–æ—Ä—Ç—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞ —Ä–æ—É—Ç–∞: 
1. /status ‚Äî –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º—è, –ø—Ä–æ—à–µ–¥—à–µ–µ —Å –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ hh:mm:ss 
2. /api/events ‚Äî –¥–æ–ª–∂–µ–Ω –æ—Ç–¥–∞–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ events.json. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ get-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞ type –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ type ‚Äî –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å 400 "incorrect type". (/api/events?type=info:critical) –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ—É—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–¥–∞–≤–∞—Ç—å `<h1>Page not found</h1>`, —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º 404.
3. –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π ‚Äî –ø—Ä–∏–¥—É–º–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –≤—ã–≤–æ–¥–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ. (offset & limit)
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫ –≤—ë—Ä—Å—Ç–∫–µ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
